# Python-Quadrotor-Quaternion-Dynamics-Simulator
A simple, quaternion-based quadrotor dynamics model for robotics, control systems, and aerospace applications.
## 1. System Definition and State Representation
### 1.1. State Vector
The **state vector**, denoted by xx, encapsulates all the key variables needed to fully describe the rocket's physical state at any given time. These include mass, position, velocity, orientation, and angular velocity:
$$x(t) = \begin{bmatrix} r_{\mathcal{I}}(t)\\v_{\mathcal{I}}(t)\\ q_{\mathcal{B}/\mathcal{I}}(t) \\ \omega_{\mathcal{B}}(t) \end{bmatrix}\in \mathbb{R}^{13}$$
Where:
- $r_{\mathcal{I}}\in \mathbb{R}^3$: **Position** vector in inertial frame (global reference frame)
- $v_{\mathcal{I}}\in \mathbb{R}^3$: **Velocity** vector in the inertial frame
- $q_{\mathcal{B}/\mathcal{I}} \in \mathbb{R}^4$: **Quaternion** representing the attitude of the body frame relative to the inertial frame
- $\omega_{\mathcal{B}}\in \mathbb{R}^3$: **Angular velocity** in body frame (local rocket reference frame)

### 1.2. Control Vector
The **control input vector**, denoted by $u$, defines the external forces and torques applied to control the rocket:
$$u=\begin{bmatrix} u_{\mathcal{B}}(t)\\\tau_{\mathcal{B}}(t) \end{bmatrix}\in \mathbb{R}^{6}$$
Where:
- $u_{\mathcal{B}} \in \mathbb{R}^3$: **Thrust force** vector applied by main rocket engine in body frame
- $\tau_{\mathcal{B}} \in \mathbb{R}^3$: **Torque** vector generated by Reaction Control System thrusters

These 6 control inputs enable precise adjustments to both translational motion (via thrust) and rotational motion (via torque)**.

## 2. Nonlinear Dynamics of the Quadrotor System

The evolution of the quadrotor's state is governed by the nonlinear state-space model:

> 
> $$\dot{x}(t)=f(x(t),u(t)) =\begin{bmatrix}\dot{r}_\mathcal{I}(t)\\ \dot{v}_{\mathcal{I}}(t)\\ \dot{q}_{\mathcal{B}/\mathcal{I}}(t)\\ \dot{\omega}_{\mathcal{B}}(t) \end{bmatrix}= \begin{bmatrix} v_{\mathcal{I}}(t)\\ \frac{1}{m} (C_{\mathcal{B}/\mathcal{I}}(q_{\mathcal{B}/\mathcal{I}}(t))u_{\mathcal{B}}(t)) + g_{\mathcal{I}}\\ \frac{1}{2}\Omega(\omega_{\mathcal{B}}(t))q_{\mathcal{B}/\mathcal{I}}(t) \\ J^{-1}(\tau_\mathcal{B}(t) -[\omega_{\mathcal{B}}(t)\times] J_{\mathcal{B}}\omega_{\mathcal{B}}(t)) \end{bmatrix}$$

The subscript $\mathcal{B}$ is used to denote the body frame or frame that aligned with the body of the drone and the subscript $\mathcal{I}$ is used to denote the internal frame. $C_{\mathcal{B}/\mathcal{I}}(\cdot) : \mathbb{H} \mapsto \mathrm{SO}(3)$ is used to denote the direction cosine matrix (DCM) from the body frame to inertial frame where $\mathbb{H}$ is the unit 2-norm ball in $\mathbb{R}^4$ and $\mathrm{SO}(3)$ is the matrix Lie group, special orthogonal group in $\mathbb{R}^3$. $\Omega(\cdot): \mathbb{R}^3 \mapsto \mathbb{S}^{4\times 4}$ is used to denote the $4\times 4$ skew symmetric matrix. $\cdot \times \cdot$ is simply the cross product operator.

## 3. Parameter Values

| Parameter           | Value                            |
| ------------------- | -------------------------------- |
| $J_B$               | $diag\{1, 1, 1\}\: kg\cdotp m^2$ |
| $r_{F,\mathcal{B}}$ | $(0,0,-0.25)\: m$                |
| $F_{min}$           | $5400\: N$                       |
| $F_{max}$           | $24750\: N$                      |
| $\alpha_{\dot{m}}$  | $4.5324 \times 10^{-4}\: s/m$    |
| $g_{\mathcal{I}}$   | $(0,0,-9.81)\: m/s^2$            |
| $T_{max}$           | $150\: Nm$                       |

